<!DOCTYPE html lang="en">
    <head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1" />
	<title>Marcin Szamotulski Homepage</title>
	<meta name="description" content="I am a mathematician (PhD) and a software engineer delivering solutions using JavaScript, Haskell, Purescript and Python." /> 
	<meta name="author" content="Marcin Szamotulski" />
	<meta name="keywords" content="JavaScript React Angular Python Haskell PureScript programming  web applications PWA" />
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@me_coot" />
	<meta name="twitter:title" content="Marcin Szamotulski - software engineer" />
	<meta name="twitter:description" content="I am a full-stack web developer, and a mathematician" />
	<meta name="twitter:creator" content="@coot_" />
	<meta name="twitter:image:src" content="http://marcinszamotulski.me/images/marcinszamotulski-large.jpg" />
	<meta name="twitter:domain" content="marcinszamotulski.me" />
	<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Marcin Szamotulski - software engineer" />
	<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="Marcin Szamotulski - software engineer" />
	<meta prefix="og: http://ogp.me/ns#" property="og:description" content="I am a full-stack web developer and a mathematician living in Lisbon, Portugal" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="website" />
	<meta prefix="og: http://ogp.me/ns#" property="og:url" content="http:/marcinszamotulski.me" />
	<meta prefix="og: http://ogp.me/ns#" property="og:image" content="http://marcinszamotulski.me/images/marcinszamotulski-large.jpg" />
	<meta property="fb:admins" content="100001888925907" />

	<link rel="shortcut icon" type="image/png" href="/images/elf-fg-gray-no-background-250.png" />
	<link rel="manifest"   href="/manifest.json" />
	<link rel="stylesheet" href="/assets/style.css" />
	<link rel="stylesheet" href="/assets/normalize.css" />
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" />
	<link rel="stylesheet" href="/assets/print_style.css" media="print"/>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" />

        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({
                tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
                TeX: {
                    extensions: ["AMSmath.js"]
                },
            });
        </script>
        <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML">
        </script>

	<script type="text/javascript" async src="/bower_components/html5shiv/dist/html5shiv.js"></script>
	<script type="text/javascript" async src="/bower_components/html5shiv/dist/html5shiv-printshiv.js"></script>
	<script type="text/javascript" src="/assets/index.js"></script>
	<!-- Matomo -->
	<script type="text/javascript">
	  var _paq = _paq || [];
	  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
	  _paq.push(['trackPageView']);
	  _paq.push(['enableLinkTracking']);
	  (function() {
	    var u="//analitics.marcinszamotulski.me/";
	    _paq.push(['setTrackerUrl', u+'piwik.php']);
	    _paq.push(['setSiteId', '1']);
	    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
	  })();
	</script>
	<!-- End Matomo Code -->
    </head>
    <body>
	<div id="wrapper" class="wrapper post">
	    <header class='info-hdr'>
		<ul class="links">
		    <li class="home">
			<a href="/">Home</a>
		    </li>
		</ul>
	    </header>
	    <main>
		<header>
		    <h1 class="section_h" id="haskells-algebraic-data-types-and-universal-algebra">Peano Algebras in Haskell</h1>
		</header>
		<p>
                    <a
                        href="https://en.wikipedia.org/wiki/Universal_algebra">Universal
                        algebra</a> is a field of mathematics which deals with
                    general algebraic structures. Much of classical algebra is
                    about groups (e.g. integers with addition, or rotations of
                    a plane), rings (e.g. the ring of integers with addition
                    and multiplication), fields (e.g. real numbers, or complex
                    numbers, where one multiplicative inverses of non
                    0 elements exists).  Universal algebra deals with more
                    general structures like that. Every algebra has the
                    underlying universum - a set of <code>numbers</code> and
                    a set of operations. The operations can have different
                    arity, i.e. number of arguments. Examples include constants
                    - operations of arity 0, or multiplication, addition of
                    integers - artity 2, or inverse - artiy 1.
                </p>
		<h2 id="peano-algebras">Peano algebras</h2>
		<p>
                    Let’s take as an example the algebra of natural numbers
                    using <a href="https://en.wikipedia.org/wiki/Peano_axioms">Peano axioms</a>.
                    It has one constant - let’s call it $0$ and one
                    operation of arity 1 - the successor function
                    $s$.  In Universal Algebra one can consider all
                    of the algebras which has this set of operations and
                    satisfies the Peano axioms, but let us skip the following
                    two:
                </p>
		<ul>
                    <li>
                        <p>the injectivity axiom of $s$:</p>
                        $$  s(m) = s(n) \Rightarrow m = n $$
                    </li>
                    <li><p><code>0</code> is not a successor of any element:</p>
                        $$ \not\exists_n s(n) = 0 $$
                    </li>
		</ul>
		<p>
                    Otherwise there would be only one algebra to consider
                    - natural numbers – at the end Peano was looking for 
		    axiomatic formulation of natural numbers, hence the two
		    requirements.
                </p>
		<p>
                    Let us call algebras which satisfy these axioms
                    <strong>Peano algebras</strong>. One example is the set of
                    <em>natural numbers</em> $\mathbb{N}$, where the successor
                    is defined as $s(n) = n + 1$. This is a <em>free
                        algebra</em> with one generator. What it really means
                    is that all elements can be generated from $0$
                    and the operation $s$, and that there is no
                    relation/equations between elements. A non free example
                    would be the set of $\mathbb{N}/2\mathbb{N} \simeq \{0,1\}$,
                    where $s(0) = 1$ and $s(1) = 0$ (this breaks the two
                    original Peano axioms that that we excluded).
                </p>
		<h2 id="peano-algebras-in-haskell">Peano algebras in Haskell</h2>
		<p>
                    It turns out that Peano algebras are often met in Haskell
                    code. Let’s take Haskells <code>Maybe</code>
                    <a href="https://wiki.haskell.org/Maybe">type</a>.  It has
                    two constructors <code>Nothing</code> and
                    <code>Just</code>, where <code>Nothing</code> has kind $*$ (arity
                    0) and <code>Just</code> has kind $*\rightarrow *$ (arity
                    1); like $0$ and $s$ in the Peano algebra case.  And indeed
                    it forms a
                    <a href="https://en.wikipedia.org/wiki/Peano_axioms">Peano Algebra</a>,
                    for any type $a$. It’s elements are:
                </p>
		<p>
                    <pre class="haskell"><code>Unit, Maybe Unit, Maybe (Maybe Unit), ...</code></pre>
                </p>
		<p>
                    This algebra is free, there are no relations (or equalities
                    of types) among all algebras of this type. But relations
                    are very useful, and it turns out that Haskell provides
                    them using monads. For example for the <code>Maybe</code>
                    type we have
                </p>
		<pre class="haskell"><code>(Just (Just x) &gt;&gt;= id) == Just x</code></pre>
		<p>
                    for every <code>x :: a</code>. Note that this equation is
                    on the level of terms rather than types.
                </p>
		<p>
                    This way when you use <code>Maybe</code> in a monadic
                    context you use it as $\mathbb{N}/2\mathbb{N}$ rather than
                    the free algebra $\mathbb{N}$.  Knowing these relations is
                    the essence of knowing how a given monad works.
                </p>
		<p>
                    There are other examples of a Peano algebras in Haskell.
                    The <a href="https://hackage.haskell.org/package/base-4.9.0.0/docs/Data-Either.html">Either monad</a>
                    provides an example with two generators - or two data constructors
                    <code>Left</code> and <code>Right</code>. As a Peano algebra it can be
                    represented as a binary tree where the successor of
                    <code>Right x</code> is <code>Right (Right x)</code> and
                    the successor of <code>Left x</code> is
                    <code>Left (Left x)</code> (for some type <code>x</code>). Then the
                    <code>Either</code> monad provides only one relation:
                </p>
		<pre class="haskell"><code>(Right (Right x) &gt;&gt;= id) == Right x</code></pre>
		<p>
                    and there is no relation for the <code>Left</code>
                    constructor:
                </p>
		<pre class="haskell"><code>(Left (x :: Either a) &gt;&gt;= id) == Left x</code></pre>
		<p>
                    for every term <code>x :: a</code>. The corresponding Peano
                    algebra has the form:
                </p>
		<div class="diagram">
		    <img src="/posts/latex/either-peano.svg" width="400px"/>
	    </main>
    </body>
</html>
